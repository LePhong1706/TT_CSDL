@model IEnumerable<GiangVienListVm>
@using Web_vuottai.Models 
<br />
@{
    ViewData["Title"] = "Quản lý Giảng viên";
}

<form method="get" asp-action="Index" class="row g-3 mb-3 align-items-end p-3 border rounded-3">
    
    <div class="col-md-4">
        <label class="form-label" for="hoTen">Họ tên</label>
        <input type="text" name="hoTen" id="hoTen" class="form-control" value="@ViewBag.HoTen" placeholder="Tìm theo tên...">
    </div>
    <div class="col-md-4">
        <label class="form-label" for="donViId">Đơn vị</label>
        <select name="donViId" id="donViId" class="form-select" asp-items="ViewBag.DonViList">
            <option value="">--- Tất cả Đơn vị ---</option>
        </select>
    </div>
    <div class="col-md-4">
        <label class="form-label" for="chucVuId">Chức vụ</label>
        <select name="chucVuId" id="chucVuId" class="form-select" asp-items="ViewBag.ChucVuList">
            <option value="">--- Tất cả Chức vụ ---</option>
        </select>
    </div>

    <div class="col-md-4 mt-3">
        <label class="form-label" for="chucDanhId">Chức danh</label>
        <select name="chucDanhId" id="chucDanhId" class="form-select" asp-items="ViewBag.ChucDanhList">
            <option value="">--- Tất cả Chức danh ---</option>
        </select>
    </div>
    <div class="col-md-4 mt-3">
        <label class="form-label" for="namHoc">Năm học</label>
        <select name="namHoc" id="namHoc" class="form-select" asp-items="ViewBag.NamHocs"></select>
    </div>
    <div class="col-md-4 mt-3">
        <label class="form-label" for="hocKy">Học kỳ</label>
        <select name="hocKy" id="hocKy" class="form-select">
            <option value="" selected="@(ViewBag.HocKy == null)">Cả năm</option>
            <option value="1" selected="@(ViewBag.HocKy != null && (int)ViewBag.HocKy == 1)">Học kỳ 1</option>
            <option value="2" selected="@(ViewBag.HocKy != null && (int)ViewBag.HocKy == 2)">Học kỳ 2</option>
        </select>
    </div>
    
    <div class="col-12 d-flex gap-2 mt-3">
        <button class="btn btn-primary" type="submit">Lọc</button>
        <a asp-action="Index" class="btn btn-secondary">Làm mới</a>
        
        <a asp-action="Create" asp-route-namHoc="@ViewBag.NamHoc" asp-route-hocKy="@ViewBag.HocKy" 
           class="btn btn-success ms-auto">Thêm giảng viên</a>
    </div>
</form>

<table class="table table-sm table-bordered">
    <thead>
        <tr>
            <th>Họ tên</th>
            <th>Đơn vị</th>
            <th>Năm học</th>
            <th>Học kỳ</th>
            <th>Chức vụ</th>
            <th>Chức danh</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var r in Model)
        {
            <tr>
                <td>@r.HoTen</td>
                <td>@r.TenDonVi</td>
                <td>@r.NamHoc</td>
                <td>@(r.HocKy?.ToString() ?? "Cả năm")</td>
                <td>@r.TenChucVu</td>
                <td>@r.TenChucDanh</td>
                <td class="text-nowrap">
                    <a asp-action="Edit"
                       asp-route-id="@r.GiangVienId"
                       asp-route-namHoc="@r.NamHoc"
                       asp-route-hocKy="@r.HocKy"
                       class="btn btn-sm btn-warning">Sửa</a>
                </td>
                <td class="text-nowrap">
                    <a asp-action="Delete" asp-route-id="@r.GiangVienId" class="btn btn-sm btn-danger">Xóa</a>
                </td>
            </tr>
        }
    </tbody>
</table>
